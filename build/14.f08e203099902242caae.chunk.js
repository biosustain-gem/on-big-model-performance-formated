webpackJsonp([14],{"./app/components/SVGC/index.js":function(e,t,o){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return p("g",{},void 0,Object.entries(e.segments).map(function(t){var o=u(t,2),r=o[0],n=o[1];return p(l,{from_node:e.nodes[n.from_node_id],b1:n.b1,b2:n.b2,to_node:e.nodes[n.to_node_id]},r)}),e.label&&p("text",{x:e.label_x,y:e.label_y,className:"label reaction"},void 0,e.label))}function l(e){return e.from_node&&e.to_node?e.b1?p("path",{d:"M"+e.from_node.x+","+e.from_node.y+"C"+e.b1.x+","+e.b1.y+" "+e.b2.x+","+e.b2.y+" "+e.to_node.x+","+e.to_node.y,className:"segment"}):p("line",{x1:e.from_node.x,y1:e.from_node.y,x2:e.to_node.x,y2:e.to_node.y,className:"segment"}):null}function a(e){return p("circle",{cx:e.x,cy:e.y,className:e.type,r:e.r})}Object.defineProperty(t,"__esModule",{value:!0});var c=o("./node_modules/react/react.js"),d=o.n(c),f=o("./node_modules/style-loader/index.js!./node_modules/css-loader/index.js!./app/styles/escher.css"),u=(o.n(f),function(){function e(e,t){var o=[],r=!0,n=!1,s=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(o.push(i.value),!t||o.length!==t);r=!0);}catch(e){n=!0,s=e}finally{try{!r&&l.return&&l.return()}finally{if(n)throw s}}return o}return function(t,o){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),p=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,o,r,n){var s=t&&t.defaultProps,i=arguments.length-3;if(o||0===i||(o={}),o&&s)for(var l in s)void 0===o[l]&&(o[l]=s[l]);else o||(o=s||{});if(1===i)o.children=n;else if(i>1){for(var a=Array(i),c=0;c<i;c++)a[c]=arguments[c+3];o.children=a}return{$$typeof:e,type:t,key:void 0===r?null:""+r,ref:null,props:o,_owner:null}}}(),h=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),v=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),h(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.reactions!==e.reactions}},{key:"render",value:function(){var e=this;return console.log(this.props.reactions),p("g",{},void 0,console.time("reactions"),Object.entries(this.props.reactions).map(function(t){return p(i,{label:t[1].bigg_id,label_x:t[1].label_x,label_y:t[1].label_y,segments:t[1].segments,nodes:e.props.nodes},t[0])}),console.timeEnd("reactions"))}}]),t}(d.a.Component),g=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),h(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.nodes!==e.nodes}},{key:"render",value:function(){return p("g",{},void 0,console.time("nodes"),Object.entries(this.props.nodes).map(function(e){var t=u(e,2),o=t[0],r=t[1];return"metabolite"===r.node_type?p(m,{node:r},o):p(a,{x:r.x,y:r.y,r:10,type:r.node_type},o)}),console.timeEnd("nodes"))}}]),t}(d.a.Component),m=function(e){function t(e){r(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.click=function(e){console.log(e,o)},o.state={},o}return s(t,e),h(t,[{key:"render",value:function(){return p("g",{className:"metabolite",onClick:this.click},void 0,p(a,{x:this.props.node.x,y:this.props.node.y,r:10+10*+this.props.node.node_is_primary}),p("text",{x:this.props.node.label_x,y:this.props.node.label_y},void 0,this.props.node.bigg_id))}}]),t}(d.a.Component),y=function(e){function t(e){r(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.zoomHandler=function(e){o.running||(o.running=!0,o.zoom(1-e.deltaY/1e3,e.nativeEvent.offsetX,e.nativeEvent.offsetY),o.running=!1,e.preventDefault())},o.dragStartHandler=function(e){o.prev_pos=[e.clientX,e.clientY]},o.dragHandler=function(e){o.prev_pos[0]&&(o.pan(e.clientX-o.prev_pos[0],e.clientY-o.prev_pos[1]),o.prev_pos=[e.clientX,e.clientY])},o.dragStopHandler=function(e){o.prev_pos=[null,null]},o.state={zoom_init:void 0,matrix:[void 0,0,0,void 0,void 0,void 0]},o}return s(t,e),h(t,[{key:"zoom",value:function(e,t,o){for(var r=this.state.matrix,n=r.length,s=0;s<n;s++)r[s]*=e;r[4]+=(1-e)*t,r[5]+=(1-e)*o,this.setState({matrix:r})}},{key:"pan",value:function(e,t){var o=this.state.matrix;o[4]+=e,o[5]+=t,this.setState({matrix:o})}},{key:"componentDidMount",value:function(){this.cont.style.height=this.cont.clientWidth+"px",console.log(this.cont,this.props.data[1].canvas.width);var e=this.cont.clientWidth/this.props.data[1].canvas.width,t=this.props;this.setState({zoom_init:e,matrix:[e,0,0,e,-e*t.data[1].canvas.x,-e*t.data[1].canvas.y]}),console.log(this.state)}},{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){var e=this,t=this.props.data[1],o=t.reactions,r=t.nodes;t.canvas;return d.a.createElement("div",{ref:function(t){return e.cont=t},style:this.props.style},this.props.data&&void 0!==this.state.zoom_init?p("svg",{className:"escher",onWheel:this.zoomHandler,onMouseDown:this.dragStartHandler,onMouseMove:this.dragHandler,onMouseUp:this.dragStopHandler},void 0,p("g",{transform:"matrix("+this.state.matrix.join(" ")+")"},void 0,p(v,{reactions:o,nodes:r}),p(g,{nodes:r})),'// console.timeEnd("renderescher")'):"")}}]),t}(d.a.Component);t.default=y},"./node_modules/css-loader/index.js!./app/styles/escher.css":function(e,t,o){t=e.exports=o("./node_modules/css-loader/lib/css-base.js")(),t.push([e.i,"svg.escher{position:relative;width:100%;height:99%}svg.escher .label{font-family:sans-serif;font-style:italic;font-weight:700;font-size:8px;fill:#000;stroke:none}svg.escher .label.node{font-size:20px}svg.escher .label.reaction{font-size:30px;fill:#202078;text-rendering:optimizelegibility}svg.escher .label.gene{font-size:18px;fill:#202078}svg.escher .node circle{stroke-width:2px}svg.escher .node.midmarker,svg.escher .node.multimarker{fill:#fff;fill-opacity:.2;stroke:#323232}svg.escher .node.metabolite-circle{stroke:#a24510;fill:#e0865b}svg.escher .segment{stroke:#334e75;stroke-width:10px}svg.escher .segment .arrowhead{fill:#334e75}svg.escher .stoichiometry-label-rect{fill:#fff;opacity:.5}svg.escher .stoichiometry-label{fill:#334e75;font-size:17px}svg.escher .membrane{fill:none;stroke:#fb0}svg.escher .brush .extent{fill-opacity:.1;fill:#000;stroke:#fff;shape-rendering:crispEdges}svg.escher #brush-container .background{fill:none}svg.escher .bezier-circle{fill:#fff}svg.escher .bezier-circle.b1{stroke:red}svg.escher .bezier-circle.b2{stroke:#00f}svg.escher .connect-line{stroke:#c8c8c8}svg.escher .direction-arrow{stroke:#000;stroke-width:1px;fill:#fff;opacity:.3}svg.escher .start-reaction-cursor{cursor:pointer}svg.escher .start-reaction-target{stroke:#646464;fill:none;opacity:.5}svg.escher .rotation-center-line{stroke:red;stroke-width:5px}svg.escher .highlight{fill:#d97000;text-decoration:underline}svg.escher .cursor-grab{cursor:grab;cursor:-webkit-grab}svg.escher .cursor-grabbing{cursor:grabbing;cursor:-webkit-grabbing}svg.escher .edit-text-cursor{cursor:text}svg.escher .metabolite{pointer-events:all}svg.escher .metabolite circle{fill:orange;stroke-width:1;stroke:#000}svg.escher .metabolite text{font-size:3em;text-rendering:optimizelegibility;cursor:default;font-size:8px;font-size:20px;font-family:sans-serif;font-style:italic;font-weight:700;fill:#000;stroke:none}svg.escher .multimarker{fill:#f0f8ff;stroke-width:1;stroke:#000}svg.escher .midmarker{fill:#90ee90;stroke-width:1;stroke:#000}svg.escher .segment{stroke:#d3d3d3;stroke-width:10;fill:none}",""])},"./node_modules/style-loader/index.js!./node_modules/css-loader/index.js!./app/styles/escher.css":function(e,t,o){var r=o("./node_modules/css-loader/index.js!./app/styles/escher.css");"string"==typeof r&&(r=[[e.i,r,""]]);o("./node_modules/style-loader/addStyles.js")(r,{});r.locals&&(e.exports=r.locals)}});